jQuery(document).ready((function($){var currentRatio=window.devicePixelRatio;function checkZooming(){currentRatio!==window.devicePixelRatio&&$(window).trigger("zoom")}function openMenu(){$("#menu-button-toggle").attr("aria-expanded","true"),$(window).on("scroll",closeMenu),$("#projects-container").on("wheel",closeMenu),$("#wrapper").on("click",closeMenu),$("#menu-container").show().animate({top:"0em",opacity:"1"},300)}function closeMenu(){$("#menu-button-toggle").attr("aria-expanded","false"),$(window).off("scroll",closeMenu),$("#projects-container").off("wheel",closeMenu),$("#wrapper").off("click",closeMenu),$("#menu-container").animate({top:"-11.5em",opacity:"0"},300,(function(){$(this).hide()}))}function openAccordion(el){var controls=$(el).attr("aria-controls");$("#"+controls).slideDown(300),$(el).attr("aria-expanded","true"),$(el).parent().siblings().children(".project-nav-content").slideUp(300),$(el).parent().siblings().children(".project-nav-title").attr("aria-expanded","false")}function closeAccordion(el){var controls=$(el).attr("aria-controls");$("#"+controls).slideUp(300),$(el).attr("aria-expanded","false")}function showMoreContent(el){var controls=$(el).attr("aria-controls");$("#"+controls).slideDown(300),$(el).attr("aria-expanded","true"),$(el).html("Less")}function showLessContent(el){var controls=$(el).attr("aria-controls");$("#"+controls).slideUp(300),$(el).attr("aria-expanded","false"),$(el).html("More")}function load_moon_phases(obj){var gets=[];for(var i in obj)gets.push(i+"="+encodeURIComponent(obj[i]));var xmlhttp=new XMLHttpRequest,url="https://www.icalendar37.net/lunar/api/?"+gets.join("&");xmlhttp.onreadystatechange=function(){var moon;4==xmlhttp.readyState&&200==xmlhttp.status&&fetch_moon(JSON.parse(xmlhttp.responseText))},xmlhttp.open("GET",url,!0),xmlhttp.send()}function moonDisplay(){var configMoon={lang:"en",month:(new Date).getMonth()+1,year:(new Date).getFullYear(),texturize:!1};configMoon.LDZ=new Date(configMoon.year,configMoon.month-1,1)/1e3,load_moon_phases(configMoon)}function fetch_moon(moon){var day=(new Date).getDate(),dayWeek=moon.phase[day].dayWeek;if(moon.phase[day].isPhaseLimit)var moonString=moon.phase[day].phaseName;else var moonString=moon.phase[day].phaseName+" Moon";document.getElementById("moon-phase").innerHTML=moonString,document.getElementById("moon-visual").innerHTML=moon.phase[day].svg,document.getElementById("moon-date").innerHTML=moon.nameDay[dayWeek]+", "+moon.monthName+" "+ordinalSuffixOf(day);var phaseLimit=moon.phase[day].isPhaseLimit;"Full moon"==phaseLimit?$("#moon-visual").addClass("full"):"New moon"==phaseLimit?$("#moon-visual").addClass("new"):$("#moon-visual").addClass("none")}function ordinalSuffixOf(i){var j=i%10,k=i%100;return 1==j&&11!=k?i+"st":2==j&&12!=k?i+"nd":3==j&&13!=k?i+"rd":i+"th"}$(window).on("resize",checkZooming),$(window).on("zoom",(function(){console.log("Browser zoom detected. For accessibility reasons the font-size has been set to a static value to allow zoom to function."),$("body").css("font-size",$("body").css("font-size")),$(window).off("resize",checkZooming)})),$("#menu-button-toggle").click((function(){"true"===$("#menu-button-toggle").attr("aria-expanded")?closeMenu():openMenu()})),$(".project-nav-title").click((function(e){var el=e.currentTarget;"true"===$(el).attr("aria-expanded")?closeAccordion(el):"false"===$(el).attr("aria-expanded")&&openAccordion(el)})),$(".project-team-button-more").click((function(e){var el=e.currentTarget;"true"===$(el).attr("aria-expanded")?showLessContent(el):"false"===$(el).attr("aria-expanded")&&showMoreContent(el)})),$("info-person-wrapper"),$("#menu-button-darkmode").click((function(){var html=document.getElementsByTagName("html")[0];html.classList.contains("is-dark-mode")?(html.classList.remove("is-dark-mode"),localStorage.setItem("dark-mode","false")):(html.classList.add("is-dark-mode"),localStorage.setItem("dark-mode","true"))})),$("#toggle-images-button").click((function(){var html=$("html")[0];$(html).hasClass("toggle-images")?($(html).removeClass("toggle-images"),sessionStorage.setItem("toggle-images","false")):($(html).addClass("toggle-images"),sessionStorage.setItem("toggle-images","true"))})),$(".feed-filter-tag").click((function(evt){evt.preventDefault();var tag=$(evt.currentTarget).attr("data-tag"),html=$("html")[0];$(html).attr("data-filter")!=tag&&$(html).attr("data-filter",tag)})),0===$("#related-posts-list").children().length&&$("#project-related-posts").remove(),moonDisplay();for(var draggableImages=document.getElementsByClassName("draggable-object"),i=0;i<draggableImages.length;i++){var objWidth=$(draggableImages[i]).children(":first").attr("width"),objHeight=$(draggableImages[i]).children(":first").attr("height");objHeight===objWidth||(objHeight>objWidth?$(draggableImages[i]).css("width",objWidth/objHeight+"em"):objHeight<objWidth&&$(draggableImages[i]).css("height",objHeight/objWidth+"em"))}function setObjectCaption(el){var elCaption=el.getAttribute("data-caption");function zoomObject(){$(".zoomed-object").length>0&&unzoomObject(),$(el).addClass("zoomed-object")}function unzoomObject(){$(".zoomed-object").removeClass("zoomed-object")}function fillObjectCaption(){$("#object-caption-container").hasClass("caption-visible")||($("#object-caption-container").show(1).addClass("caption-visible"),$(window).on("scroll wheel",hideObjectCaption)),$("#object-caption-container").html(elCaption)}function hideObjectCaption(){$("#object-caption-container").hasClass("caption-visible")&&($("#object-caption-container").removeClass("caption-visible").delay(300).hide(1),$(window).off("scroll wheel",hideObjectCaption))}$(el).hasClass("zoomed-object")?(unzoomObject(),hideObjectCaption()):(zoomObject(),""!=elCaption?fillObjectCaption():hideObjectCaption())}function dragMoveListener(event){var target=event.target,x=(parseFloat(target.getAttribute("data-x"))||0)+event.dx,y=(parseFloat(target.getAttribute("data-y"))||0)+event.dy;target.style.webkitTransform=target.style.transform="translate("+x+"px, "+y+"px)",target.setAttribute("data-x",x),target.setAttribute("data-y",y)}interact(".draggable-object").on("tap",(function(event){setObjectCaption(event.currentTarget)})).on("down",(function(event){event.preventDefault();var target=event.currentTarget;target.parentNode.appendChild(target)})).draggable({inertia:!0,modifiers:[interact.modifiers.restrictRect({restriction:"body",endOnly:!0})],listeners:{move:dragMoveListener},cursorChecker:()=>null})}));